<template>
  <svg width="62" height="61" viewBox="0 0 62 61" fill="none" xmlns="http://www.w3.org/2000/svg">
    <mask id="path-1-inside-1_3793_9456" fill="white">
      <path
        d="M31 40.8398C26.45 40.8398 22.75 37.1398 22.75 32.5898V27.5898C22.75 23.0398 26.45 19.3398 31 19.3398C35.55 19.3398 39.25 23.0398 39.25 27.5898V32.5898C39.25 37.1398 35.55 40.8398 31 40.8398ZM31 20.8398C27.28 20.8398 24.25 23.8698 24.25 27.5898V32.5898C24.25 36.3098 27.28 39.3398 31 39.3398C34.72 39.3398 37.75 36.3098 37.75 32.5898V27.5898C37.75 23.8698 34.72 20.8398 31 20.8398Z" />
    </mask>
    <path
      d="M31 37.8398C28.1069 37.8398 25.75 35.483 25.75 32.5898H19.75C19.75 38.7967 24.7931 43.8398 31 43.8398V37.8398ZM25.75 32.5898V27.5898H19.75V32.5898H25.75ZM25.75 27.5898C25.75 24.6967 28.1069 22.3398 31 22.3398V16.3398C24.7931 16.3398 19.75 21.383 19.75 27.5898H25.75ZM31 22.3398C33.8931 22.3398 36.25 24.6967 36.25 27.5898H42.25C42.25 21.383 37.2069 16.3398 31 16.3398V22.3398ZM36.25 27.5898V32.5898H42.25V27.5898H36.25ZM36.25 32.5898C36.25 35.483 33.8931 37.8398 31 37.8398V43.8398C37.2069 43.8398 42.25 38.7967 42.25 32.5898H36.25ZM31 17.8398C25.6231 17.8398 21.25 22.213 21.25 27.5898H27.25C27.25 25.5267 28.9369 23.8398 31 23.8398V17.8398ZM21.25 27.5898V32.5898H27.25V27.5898H21.25ZM21.25 32.5898C21.25 37.9667 25.6231 42.3398 31 42.3398V36.3398C28.9369 36.3398 27.25 34.653 27.25 32.5898H21.25ZM31 42.3398C36.3769 42.3398 40.75 37.9667 40.75 32.5898H34.75C34.75 34.653 33.0631 36.3398 31 36.3398V42.3398ZM40.75 32.5898V27.5898H34.75V32.5898H40.75ZM40.75 27.5898C40.75 22.213 36.3769 17.8398 31 17.8398V23.8398C33.0631 23.8398 34.75 25.5267 34.75 27.5898H40.75Z"
      fill="#144CF5" mask="url(#path-1-inside-1_3793_9456)" />
    <path
      d="M31 29.8398C29.76 29.8398 28.75 28.8298 28.75 27.5898V25.5898C28.75 24.3498 29.76 23.3398 31 23.3398C32.24 23.3398 33.25 24.3498 33.25 25.5898V27.5898C33.25 28.8298 32.24 29.8398 31 29.8398ZM31 24.8398C30.59 24.8398 30.25 25.1798 30.25 25.5898V27.5898C30.25 27.9998 30.59 28.3398 31 28.3398C31.41 28.3398 31.75 27.9998 31.75 27.5898V25.5898C31.75 25.1798 31.41 24.8398 31 24.8398Z"
      fill="#144CF5" />
    <path
      d="M31 24.8398C30.59 24.8398 30.25 24.4998 30.25 24.0898V20.0898C30.25 19.6798 30.59 19.3398 31 19.3398C31.41 19.3398 31.75 19.6798 31.75 20.0898V24.0898C31.75 24.4998 31.41 24.8398 31 24.8398Z"
      fill="#144CF5" />
    <path
      d="M57 30.0898C57 44.4492 45.3594 56.0898 31 56.0898C16.6406 56.0898 5 44.4492 5 30.0898C5 15.7304 16.6406 4.08984 31 4.08984C45.3594 4.08984 57 15.7304 57 30.0898ZM5.55262 30.0898C5.55262 44.144 16.9458 55.5372 31 55.5372C45.0542 55.5372 56.4474 44.144 56.4474 30.0898C56.4474 16.0356 45.0542 4.64247 31 4.64247C16.9458 4.64247 5.55262 16.0356 5.55262 30.0898Z"
      stroke="#EEEEFC" stroke-width="2" />
    <path pathLength="0.5" ref="pathRef"
      d="M57 30.0898C57 44.4492 45.3594 56.0898 31 56.0898C16.6406 56.0898 5 44.4492 5 30.0898C5 15.7304 16.6406 4.08984 31 4.08984C45.3594 4.08984 57 15.7304 57 30.0898ZM5.55262 30.0898C5.55262 44.144 16.9458 55.5372 31 55.5372C45.0542 55.5372 56.4474 44.144 56.4474 30.0898C56.4474 16.0356 45.0542 4.64247 31 4.64247C16.9458 4.64247 5.55262 16.0356 5.55262 30.0898Z"
      stroke="#144CF5" stroke-width="2.07" />
  </svg>

</template>

<script lang="ts" setup>
import { animate } from "motion"
const props = defineProps<{
  scrollProgress: number
}>()

const scrollProgress = computed(() => props.scrollProgress ?? 1)
const pathRef = ref<SVGPathElement | null>(null)

const draw = (progress: number) => {
  return {
    strokeDashoffset: 1 - (1 - progress),
    visibility: "visible"
  }
}

if (pathRef.value) {
  animate(pathRef.value, draw(scrollProgress.value), { duration: 0.6, easing: 'ease-in-out' })
}

watch(scrollProgress, (progress) => {
  if (pathRef.value) {
    animate(pathRef.value, draw(progress), { duration: 0.6, easing: 'ease-in-out' })
  }
})
</script>